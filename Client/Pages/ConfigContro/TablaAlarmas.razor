@inject HttpClient Http
<div style="overflow:auto">
    <table class="table table-success table-striped">
        <thead>
            <tr>
                <th>Pozo</th>
                <th>Variable</th>
                <th>Unidad</th>
                <th>HHigth</th>
                <th>Higth</th>
                <th>Low</th>
                <th>LLow</th>
                <th>Editar</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var i in Alarmas)
            {
                <tr>
                    <td>@i.Pozo.NombrePozo</td>
                    <td>@i.VariableProceso.Nombre</td>
                    <td>@i.VariableProceso.Unidad</td>
                    <td>@i.HH</td>
                    <td>@i.H</td>
                    <td>@i.L</td>
                    <td>@i.LL</td>
                    <td>@i.Habilitado</td>
                    <td>
                        <button type="button" class="btn btn-primary">
                            <i class="bi bi-pencil-square"></i>
                        </button>
                    </td>
                    <td>
                        <button type="button" class="btn btn-warning">
                            <i class="bi bi-trash3-fill"></i>
                        </button>
                    </td>

                </tr>
            }
        </tbody>
    </table>
</div>
<div style="display:flex;justify-content:center">
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#NuevaAlarma">
       Nueva Alarma
    </button>
</div>
<div class="modal fade" id="NuevaAlarma" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <FormularioAlarma />
        </div>
    </div>
</div>
@code {
    public static List<Alarma> Alarmas = new List<Alarma>();

    async Task ActualizarDatos()
    {
        try
        {
            var resultado = await Http.GetFromJsonAsync<List<Alarma>>("api/Alarma");
            if (resultado != null)
                Alarmas = resultado;
        }catch(Exception e)
        {
            Console.WriteLine("Error en la peticion para Alarmas");
            Console.WriteLine(e.Message);
        }
        
    }
    protected override async Task OnInitializedAsync()
    {
        await ActualizarDatos();
    }

}
